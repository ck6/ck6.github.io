<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hex Grid Example</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  body {
    margin: 0;
    background: #000;
    font-family: Arial, sans-serif;
    color: #fff;
  }

  /* Container for the hex grid */
  .hex-grid {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    --hex-size: 40px; /* width of a single hex */
  }

  /* Each row of the hex grid */
  .hex-row {
    display: flex;
    /* Space between rows can be adjusted as needed */
    margin-bottom: calc(var(--hex-size) * 0.15);
  }

  /* Offset every even row to create the staggered effect */
  .hex-row:nth-child(even) {
    margin-left: calc(var(--hex-size) / 2);
  }

  .hex {
    width: var(--hex-size);
    height: calc(var(--hex-size) * 1.1547);
    background: #444;
    margin: calc(var(--hex-size) * 0.05);
    clip-path: polygon(
      50% 0%,
      100% 25%,
      100% 75%,
      50% 100%,
      0% 75%,
      0% 25%
    );
    cursor: pointer;
    transition: background 0.3s;
  }

  .hex:hover {
    background: #777;
  }

  /* Simple top and bottom bars for demonstration */
  .top-bar, .bottom-nav {
    background: #111;
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .bottom-nav {
    position: fixed;
    bottom: 0;
    width: 100%;
  }

  .bottom-nav button {
    background: none;
    border: none;
    color: #fff;
    padding: 10px;
    flex: 1;
    text-align: center;
    cursor: pointer;
  }

  .bottom-nav button.active {
    background: #333;
    border-radius: 4px;
  }

  .content {
    padding-bottom: 60px; /* space above bottom nav */
  }
</style>
</head>
<body>
<div class="top-bar">
  <button onclick="closeWebApp()" style="background:none;border:none;color:#fff;">âœ• Close</button>
  <div style="flex:1;text-align:center;">CLUSTER #1 323 927</div>
  <div style="background:#111;padding:8px;border-radius:8px;">USDT:0.78 BTC:0 TON:0</div>
</div>
<div class="content">
  <div class="hex-grid" id="hexGridContainer">
    <!-- The hex rows and tiles will be generated by JS -->
  </div>
</div>
<div class="bottom-nav">
  <button id="bonusesTab" onclick="showTab('bonuses')">BONUSES</button>
  <button id="fieldTab" class="active" onclick="showTab('field')">FIELD</button>
  <button id="statsTab" onclick="showTab('stats')">STATS</button>
  <button id="balanceTab" onclick="showTab('balance')">BALANCE</button>
</div>

<script>
  const tg = window.Telegram.WebApp;
  tg.expand();
  tg.setBackgroundColor("#000000");
  tg.MainButton.setText("Close WebApp");
  tg.MainButton.show();
  tg.onEvent('mainButtonClicked', () => {
    tg.close();
  });

  function closeWebApp() {
    tg.close();
  }

  // Create a staggered hex grid
  function createHexGrid(rows, cols) {
    const container = document.getElementById('hexGridContainer');
    for (let r = 0; r < rows; r++) {
      const rowDiv = document.createElement('div');
      rowDiv.className = 'hex-row';
      for (let c = 0; c < cols; c++) {
        const hex = document.createElement('div');
        hex.className = 'hex';
        hex.onclick = () => onHexClick(r, c, hex);
        rowDiv.appendChild(hex);
      }
      container.appendChild(rowDiv);
    }
  }

  function onHexClick(row, col, element) {
    // Toggle style or send data
    if (element.style.background === 'rgb(119, 119, 119)') {
      element.style.background = '#444';
    } else {
      element.style.background = '#777';
    }
    // Example: tg.sendData(JSON.stringify({row, col}));
  }

  createHexGrid(7,7);

  // Tab functionality (basic demo)
  function showTab(tab) {
    document.querySelectorAll('.bottom-nav button').forEach(btn => btn.classList.remove('active'));
    document.getElementById(tab+'Tab').classList.add('active');
    // Show/hide content as needed
    // In a more complex app, you'd switch out content containers here
  }
</script>
</body>
</html>
